import Alert from '@mui/material/Alert';
import { CodeEdit, InfoPage } from '../../../components/index.jsx';

<InfoPage>
	[https://medium.com/@sergeybulavyk](https://medium.com/@sergeybulavyk/преобразование-типов-в-javascript-35a15ddfc333)
	
	[https://behemothoz.gitbooks.io](https://behemothoz.gitbooks.io/js-learn/content/data-types/data-types/preobrazovanie-tipov/preobrazovanie-obektov-v-prostie-znacheniya.html)
</InfoPage>


# Перетворення типів

Перетворення типів це процес конвертації значення з одного типу в інший (наприклад рядки в число, об'єкта до булеве значення і т.д.).

## Явне та неявне перетворення
Перетворення типів може відбуватися явно та неявно.

Коли розробник хоче навмисно зробити перетворення типів, написавши, наприклад Number(value), це називається явним перетворенням типів (чи type casting).

Оскільки JavaScript це слабко типізована мова, перетворення між різними типами може відбуватися автоматично, і це називається неявним перетворенням типів. Найчастіше це відбувається, коли ви застосовуєте оператори до значень різних типів, таких як ```1 == null```, ```2 / `5` ```, ```null + new Date()```, може відбуватися в залежності від контексту, як наприклад, у випадку з ```if (value){...}``` де value буде приведено до булевого значення.

## ===

Оператор суворої рівності ```===``` не призводить до неявного перетворення типів. Оператор нестрогої рівності ```==```, в свою чергу, здійснює порівняння операндів і, якщо потрібно, неявне перетворення типів.

#### Три типи конвертації
По-перше, слід знати, що в JavaScript існує всього 3 типи перетворення:

* рядкове
* булеве
* чисельне

По-друге, логіка перетворення для примітивів та об'єктів працює по-різному, проте, примітиви та об'єкти можуть бути перетворені лише цими трьома способами.

Давайте спочатку розберемося із примітивами:

#### Приведення до рядка

Для явного приведення значення рядка необхідно застосувати до нього функцію ```String()```. Неявне перетворення буде викликане бінарним оператором +, код один з операндів є рядком:

<CodeEdit text={`
String(123) // явне перетворення
123 + ''    // неявне перетворення
`}/>

Всі примітиви будуть приведені до рядка цілком природно, як ви могли і очікувати:

<CodeEdit text={`
String(123)                   // '123'
String(-12.3)                 // '-12.3'
String(null)                  // 'null'
String(undefined)             // 'undefined'
String(true)                  // 'true'
String(false)                 // 'false'
`}/>


#### Бульове перетворення
Для явного перетворення булевого значення, потрібно застосувати функцію ```Boolean()```. Неявне перетворення відбувається у логічному контексті ```if (val) { … }``` або за умови застосування логічних операторів ```(|| && !)```.

<CodeEdit text={`
Boolean(2)          // явне перетворення
if (2) { ... }      // неявно через логічний контекст
!!2                 // неявний через логічний оператор
2 || 'hello'        // неявний через логічний оператор
`}/>

Оскільки існує лише два можливі результати перетворення, легше просто запам'ятати список хибних значень:

<CodeEdit text={`
Boolean('')           // false
Boolean(0)            // false     
Boolean(-0)           // false
Boolean(NaN)          // false
Boolean(null)         // false
Boolean(undefined)    // false
Boolean(false)        // false
`}/>


Будь-яке значення, яке не увійшло до цього списку, буде перетворено на ```true```, включаючи об'єкти, функції, ```Array```, ```Date``` і так далі. Символи, порожні об'єкти та масиви також матимуть значення ```true```.

<CodeEdit text={`
Boolean({})             // true
Boolean([])             // true
Boolean(Symbol())       // true
!!Symbol()              // true
Boolean(function() {})  // true
`}/>

#### Чисельне перетворення
Для явного перетворення до потрібно застосувати функцію ```Number()```, так само, як ми робили з ```Boolean()``` і ```String()```.

Неявне перетворення дещо заплутаніше, оскільки воно викликається у більшій кількості випадків.

* оператори порівняння ```(>, <, <=,>=)```
* бінарні оператори ```(| & ^ ~)```
* арифметичні оператори ```(- + * / %)```. Зверніть увагу, що бінарний оператор ```+``` не викликає чисельного перетворення, якщо один із операндів є рядком
* унарний оператор +
* оператор нестрогої рівності ```==``` (включаючи ```!=```). Зверніть увагу, що цей оператор не викликає чисельне перетворення, якщо обидва операнди є рядками

<CodeEdit text={`
Number('123')   // явне перетворення
+'123'          // неявне перетворення
123 != '456'    // неявне перетворення
4 > '5'         // неявне перетворення
5/null          // неявне перетворення
true | 0        // неявне перетворення
`}/>

Приклади того, як примітиви будуть перетворені на числа:

<CodeEdit text={`
Number(null)                   // 0
Number(undefined)              // NaN
Number(true)                   // 1
Number(false)                  // 0
Number(" 12 ")                 // 12
Number("-12.34")               // -12.34
Number("\n")                   // 0
Number(" 12s ")                // NaN
Number(123)                    // 123
`}/>

Існує два спеціальні правила, які слід запам'ятати:

При застосуванні ```==``` до ```null``` чи ```undefined```, чисельне перетворення немає, оскільки ```null``` може дорівнювати лише ```null``` чи ```undefined```, і нічому іншому.

<CodeEdit text={`
null == 0               // false, null не перетворюється 0
null == null            // true
undefined == undefined  // true
null == undefined       // true
`}/>

NaN не дорівнює нічому, навіть самому собі.

<CodeEdit text={`
if (NaN !== NaN) {}
`}/>

## Перетворення обєктів

Масиви успадковують за умовчанням метод ```valueOf()```, який повертає сам об'єкт, а не просте значення, тому при перетворенні масиву в число інтерпретатор спирається на метод ```toString()```.

Порожні масиви перетворюються на порожній рядок. А порожній рядок перетворюється на число ```0```. Масив з єдиним елементом перетворюється на той самий рядок, що й єдиний елемент масиву. Якщо масив містить однину, це число перетворюється на рядок, а потім знову на число.

Оператор ```+``` в мові JavaScript виконує складання чисел та конкатенацію рядків. Якщо будь-який з його операндів є об'єктом, JavaScript перетворює об'єкт, використовуючи спеціальне перетворення об'єкта на просте значення замість перетворення об'єкта на число, що використовується іншими арифметичними операторами. Те саме стосується і оператора рівності ```==```. Якщо виконується порівняння об'єкта із простим значенням, оператор виконає перетворення об'єкта з використанням правил перетворення на просте значення.