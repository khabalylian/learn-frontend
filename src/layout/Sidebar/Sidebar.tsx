import styles from './Sidebar.module.css';
import cn from 'classnames';
import { Menu } from '../Menu/Menu';
import React, { useEffect, useRef, useState} from 'react';

export const Sidebar = ({className}: {className: string}) => {
	const [iconReverse, setIconReverse] = useState<boolean>(false);

	const sidebar = useRef(null);

	function animateScroll() {
		const scroll = window.scrollY;

		if(sidebar.current){
			
			if(scroll < 70) {
				(sidebar.current as HTMLElement).style.top = `${70 - scroll}px`;
			} 
			
			if (scroll > 70) {
				(sidebar.current as HTMLElement).style.top = '0px';
			}

		}
	}

	function hideSidebar () {
		const sidebar = document.getElementsByClassName(styles.sidebar)[0];
		const subtitle = document.getElementsByClassName(styles.subtitle)[0];

		setIconReverse(iconReverse => !iconReverse)

		sidebar.classList.toggle(styles.hideBar);
		subtitle.classList.toggle(styles.hideSubtitle);
	}

	useEffect(() => {
		window.addEventListener('scroll', animateScroll);
		return () => window.removeEventListener('scroll', animateScroll)
    }, []);

	return (
        <div className={cn(className, styles.sidebar)} ref={sidebar}>
            <Menu />
            <button className={styles.hideSidebar} onClick={hideSidebar}>
                {iconReverse ? (
                    <svg
                        width='24'
                        height='24'
                        viewBox='0 0 153 149'
                        fill='none'
                        xmlns='http://www.w3.org/2000/svg'
                    >
                        <path
                            d='M151.782 94.9971C151.598 90.5774 151.404 84.3297 151.198 77.7144C150.885 67.5983 150.53 56.1328 150.137 49.2564C149.743 42.332 149.179 33.2187 148.32 24.1186C147.083 11.0089 136.531 1.51963 122.661 1.04182C112.312 0.686082 101.789 0.537725 91.6062 0.393331H91.5064C88.5995 0.351325 85.6434 0.377539 82.7857 0.401823C78.0824 0.440547 73.2215 0.481906 68.4598 0.230528C57.6808 -0.339829 46.2572 0.137925 31.4168 1.77811C21.8132 2.83941 14.5908 5.65907 8.68578 10.6512C3.84988 14.7395 1.49302 19.4763 1.4812 25.1313C1.47661 27.0038 1.43917 28.8823 1.3696 30.7167C1.30856 32.3504 1.197 34.0175 1.0887 35.6295C0.785323 39.059 0.703517 42.5044 0.843855 45.9444C1.58355 57.639 2.74724 83.2782 1.84871 96.6136C1.53039 101.344 1.61768 106.175 1.70169 110.846L1.72012 111.897C1.74388 119.206 2.95121 126.464 5.29521 133.388C7.71316 140.286 12.4046 144.48 19.2397 145.854C23.5213 146.744 27.8667 147.295 32.2352 147.5C40.3974 147.832 48.6995 148.017 56.7298 148.197C59.9878 148.269 63.2461 148.345 66.5046 148.424L66.8282 148.331L69.6353 148.323H75.8705L79.2953 148.328C92.7935 148.351 106.758 148.383 120.379 146.249C125.119 145.506 130.656 144.469 135.779 142.41C145.997 138.303 151.511 130.733 152.168 119.908C152.594 112.885 152.271 105.812 151.959 98.9706C151.896 97.6457 151.837 96.3212 151.782 94.9971ZM10.0405 87.318L9.99781 85.4756C9.79632 76.6636 9.3763 58.327 8.87486 50.6091C8.37932 42.9956 8.07802 32.9536 10.1586 22.8197L10.179 22.7455C10.2159 22.6416 10.232 22.5315 10.2262 22.4213C9.72807 16.5281 13.8801 14.2506 18.2756 11.8385L18.4245 11.7565C22.6507 9.43766 27.3087 8.63495 31.718 8.01012C41.7099 6.69695 51.7817 6.08844 61.859 6.18933C66.053 6.18933 70.188 6.25831 74.2428 6.34364C81.603 6.49853 89.0872 6.59902 96.3247 6.69616C102.666 6.78148 109.222 6.86934 115.669 6.99404C118.665 7.03009 121.655 7.28588 124.613 7.75934C135.352 9.54786 141.291 16.5268 141.788 27.9398C142.15 36.2425 142.485 47.8525 142.808 59.0811C143.108 69.4762 143.419 80.2249 143.742 87.9848C143.844 90.446 143.985 92.9462 144.121 95.3634C144.334 99.1564 144.555 103.08 144.633 106.938C144.726 111.505 144.473 116.182 144.206 120.582C143.809 127.109 140.022 131.74 132.949 134.351C128.672 135.853 124.251 136.909 119.757 137.502C104.665 139.753 89.185 139.652 74.2192 139.555L72.2423 139.543C71.4678 139.538 70.6933 139.54 69.9182 139.543H68.4926L68.4867 139.799C65.1722 139.715 61.8573 139.632 58.5419 139.551C48.9489 139.316 39.0296 139.072 29.2765 138.751C26.7471 138.598 24.2334 138.249 21.7581 137.708L21.3321 137.626C17.1047 136.817 14.2765 134.209 12.931 129.872C10.9275 123.241 9.925 116.348 9.95647 109.422C9.93481 106.268 9.97943 103.055 10.0221 99.9545C10.0785 95.8103 10.1344 91.5278 10.0379 87.3161L10.0405 87.318Z'
                            fill='#3a6ea5'
                        />
                        <path
                            d='M37.2862 76.1213C37.8257 76.1711 38.3655 76.223 38.9054 76.2768C41.1232 76.4941 43.4158 76.7186 45.6814 76.7481C54.7179 76.8656 67.5093 76.9567 79.8766 77.0453C89.4592 77.111 98.5094 77.1766 105.444 77.2514C105.95 77.2702 106.454 77.3211 106.954 77.4038L107.293 77.4511C107.142 77.6145 106.998 77.77 106.862 77.9183C106.368 78.4539 105.959 78.8983 105.533 79.3255C99.5399 85.4289 94.5309 92.4255 90.6846 100.066L90.5618 100.3C90.1812 100.962 89.8812 101.667 89.6685 102.4C89.5969 102.835 89.6268 103.281 89.7558 103.702C89.7939 103.872 89.8313 104.041 89.8543 104.207L89.9016 104.552L90.2428 104.486C90.4427 104.451 90.6443 104.427 90.8467 104.412C91.3624 104.424 91.8691 104.275 92.2959 103.985C92.7695 103.539 93.1949 103.044 93.5652 102.509C93.8514 102.105 94.1641 101.72 94.5011 101.358C97.2486 98.5489 100.001 95.7453 102.759 92.9471C106.334 89.3154 109.901 85.6774 113.461 82.0329C115.044 80.5114 116.47 78.8357 117.72 77.0309C119.502 74.2638 119.229 71.9614 116.813 69.3334C114.491 66.8091 112.059 64.0749 109.379 60.975C107.428 58.7176 105.486 56.4524 103.553 54.1793C101.453 51.7167 99.3449 49.2593 97.2289 46.8072C96.4207 45.8203 95.4728 44.9567 94.4152 44.2435C93.7825 43.8497 92.4153 43.796 91.8824 44.2882C91.5912 44.6375 91.3951 45.0561 91.313 45.5033C91.2309 45.9506 91.2656 46.4114 91.4137 46.8413C91.9861 47.8903 92.6646 48.8778 93.4385 49.7883C93.6105 50.0042 93.7812 50.2195 93.9492 50.4361C96.3847 53.5773 98.823 56.7167 101.264 59.854C104.108 63.5111 106.949 67.1697 109.787 70.8299C110.02 71.1553 110.227 71.4998 110.403 71.8597C110.446 71.9417 110.492 72.0264 110.539 72.115C108.971 72.0382 107.431 71.9594 105.909 71.8813C102.155 71.6897 98.6078 71.5078 95.0137 71.37C87.3713 71.0786 76.2084 70.7951 65.4129 70.5214C56.1198 70.2845 47.3426 70.0619 40.8954 69.8388C39.632 69.8075 38.3685 69.8972 37.1221 70.1065C35.2188 70.4091 34.2526 71.3884 34.2546 73.0181C34.2539 74.8381 35.3316 75.9394 37.2862 76.1213Z'
                            fill='#3a6ea5'
                        />
                    </svg>
                ) : (
                    <svg
                        width='24'
                        height='24'
                        viewBox='0 0 153 149'
                        fill='none'
                        xmlns='http://www.w3.org/2000/svg'
                    >
                        <path
                            d='M151.785 94.9965C151.6 90.5767 151.407 84.329 151.202 77.7138C150.888 67.5976 150.532 56.1322 150.14 49.2557C149.746 42.3176 149.179 33.1905 148.323 24.1179C147.085 11.0082 136.533 1.51896 122.66 1.04115C112.313 0.685413 101.785 0.537056 91.6051 0.392662H91.506C88.5984 0.350656 85.6436 0.37687 82.7853 0.401154C78.0839 0.439878 73.2218 0.481893 68.4594 0.229859C57.679 -0.339186 46.2561 0.137913 31.417 1.77744C21.8141 2.83874 14.5911 5.6584 8.68672 10.6505C3.85082 14.7388 1.4939 19.4756 1.48143 25.1306C1.47683 26.9848 1.44005 28.8639 1.36982 30.7161C1.30878 32.3477 1.19786 34.0129 1.08956 35.6223C0.785311 39.0539 0.703301 42.5015 0.844077 45.9437C1.58377 57.6384 2.74752 83.2775 1.84965 96.613C1.53002 101.356 1.61797 106.196 1.70264 110.881L1.72034 111.894C1.7439 119.204 2.95124 126.461 5.29543 133.385C7.71338 140.284 12.4055 144.477 19.24 145.851C23.5215 146.742 27.8669 147.292 32.2354 147.497C40.397 147.83 48.7003 148.015 56.73 148.194C59.988 148.267 63.2461 148.342 66.5041 148.422L66.8284 148.328L69.6349 148.32C71.7128 148.32 73.7913 148.32 75.8701 148.32L79.2949 148.325C92.7931 148.348 106.759 148.38 120.382 146.246C125.121 145.503 130.658 144.467 135.782 142.407C146 138.3 151.514 130.729 152.17 119.905C152.597 112.882 152.274 105.803 151.962 98.9595C151.9 97.6381 151.841 96.317 151.785 94.9965ZM10.0434 87.3174L10.0013 85.4749C9.79917 76.663 9.37917 58.3263 8.87773 50.6084C8.38153 42.9949 8.07957 32.9529 10.1615 22.819L10.1818 22.7448C10.2188 22.6409 10.2348 22.5308 10.2291 22.4207C9.73159 16.5274 13.883 14.2499 18.2785 11.8379L18.428 11.7558C22.6535 9.43699 27.3123 8.63428 31.7209 8.00945C41.7125 6.69628 51.7842 6.08777 61.8612 6.18866C66.0552 6.18866 70.1915 6.25764 74.2463 6.34297C81.6058 6.49786 89.0907 6.59835 96.3274 6.69549C102.668 6.78082 109.224 6.86867 115.672 6.99338C118.669 7.02942 121.658 7.28521 124.617 7.75868C135.355 9.5472 141.294 16.5261 141.791 27.9391C142.153 36.2477 142.488 47.8681 142.812 59.1053C143.111 69.4905 143.421 80.2301 143.744 87.9841C143.847 90.4467 143.987 92.948 144.124 95.3673C144.338 99.159 144.558 103.081 144.637 106.937C144.728 111.512 144.475 116.186 144.209 120.582C143.815 127.108 140.024 131.74 132.952 134.35C128.675 135.852 124.254 136.908 119.759 137.501C104.668 139.753 89.1924 139.653 74.2227 139.555L72.2465 139.542C71.4726 139.537 70.6968 139.539 69.9223 139.542H68.4988L68.4909 139.799C65.1755 139.714 61.8603 139.632 58.5454 139.551C48.9517 139.315 39.0325 139.071 29.28 138.751C26.7515 138.598 24.2386 138.249 21.7642 137.707L21.3356 137.625C17.1082 136.816 14.28 134.208 12.9312 129.871C10.9275 123.24 9.92498 116.348 9.95669 109.421C9.93503 106.267 9.9803 103.054 10.0223 99.9538C10.0807 95.8097 10.1405 91.5272 10.0434 87.3154V87.3174Z'
                            fill='#3a6ea5'
                        />
                        <path
                            d='M43.7509 87.4474C45.7015 89.7039 47.6434 91.9689 49.5765 94.2425C51.6768 96.705 53.7849 99.1623 55.901 101.614C56.7091 102.601 57.657 103.465 58.7147 104.178C59.1179 104.394 59.5703 104.501 60.0274 104.488C60.4636 104.517 60.896 104.392 61.2489 104.134C61.54 103.784 61.7361 103.366 61.8182 102.918C61.9003 102.471 61.8656 102.01 61.7175 101.58C61.1451 100.531 60.4666 99.5438 59.6927 98.6333C59.5208 98.4174 59.3501 98.2021 59.182 97.9855C56.7457 94.8442 54.3074 91.7053 51.8671 88.5684C49.023 84.9109 46.1822 81.2519 43.3446 77.5917C43.1109 77.2664 42.9047 76.9223 42.7283 76.5627C42.685 76.4806 42.6391 76.3952 42.5918 76.3066C44.1598 76.3834 45.7002 76.4623 47.2223 76.5404C50.9765 76.7321 54.5234 76.9137 58.1175 77.0516C65.7599 77.343 76.9229 77.6273 87.7183 77.901C97.0114 78.1373 105.789 78.3603 112.236 78.5828C113.499 78.612 114.762 78.5224 116.009 78.3151C117.912 78.0125 118.878 77.0319 118.877 75.4035C118.877 73.5835 117.798 72.4821 115.842 72.3003C115.304 72.2504 114.764 72.1987 114.224 72.1449C112.006 71.9277 109.713 71.7032 107.448 71.6736C98.4113 71.5568 85.62 71.4648 73.2526 71.3762C63.6701 71.3106 54.6198 71.245 47.685 71.1702C47.1791 71.1514 46.6748 71.1006 46.1754 71.0179L45.8361 70.9707C45.9877 70.8072 46.1308 70.6517 46.2673 70.5034C46.7608 69.9678 47.1704 69.5235 47.5964 69.0968C53.5891 62.9933 58.5982 55.9965 62.4447 48.3565L62.5675 48.1229C62.9479 47.4609 63.2478 46.7558 63.4607 46.0226C63.5325 45.5876 63.5023 45.1418 63.3728 44.7204C63.3353 44.5504 63.2979 44.3812 63.2749 44.2158L63.2277 43.8711L62.8864 43.9368C62.6967 43.9735 62.4893 43.992 62.2832 44.0103C61.7673 43.998 61.2604 44.1471 60.8334 44.4369C60.3598 44.8834 59.9343 45.3784 59.564 45.9137C59.2778 46.3175 58.9652 46.7018 58.6281 47.0642C55.8715 49.882 53.1103 52.694 50.3445 55.5001C46.7792 59.1231 43.2204 62.7529 39.6678 66.3894C38.0856 67.911 36.6591 69.5866 35.4095 71.3913C33.6269 74.1584 33.8999 76.4609 36.3152 79.0888C38.6387 81.6125 41.0704 84.3468 43.7509 87.4474Z'
                            fill='#3a6ea5'
                        />
                    </svg>
                )}
            </button>
            <p className={styles.subtitle}>Документація</p>
        </div>
    );
}